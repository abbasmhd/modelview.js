/**
*
*   ModelView Extra Validation Methods add-on
*
*   A simple/extendable MV* (MVVM) framework
*   optionaly integrates into both jQuery as MVVM plugin and jQueryUI as MVC widget
*   https://github.com/foo123/modelview.js
*
**/
!function(n,t,e){"use strict";"object"==typeof module&&module.exports?module.exports=e.call(n,require(/\.min(\.js)?/i.test(__filename)?"./modelview.min":"./modelview")):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&(require.specified(t)||require.specified("ModelView"))?define(t,["ModelView"],function(t){return e.call(n,t)}):e.call(n,n.ModelView)&&"function"==typeof define&&define.amd&&define(function(){return n.ModelView})}(this,"ModelViewValidation",function(n){"use strict";var t="hasOwnProperty",e=n.Type.Cast,r=n.Type.TypeCaster,d=n.Validation.Validate,f=n.Validation.Validator;return e[t]("LCASE")||(e.LCASE=r(function(n){return String(n).toLowerCase()})),e[t]("UCASE")||(e.LCASE=r(function(n){return String(n).toUpperCase()})),e[t]("PAD")||(e.PAD=function(n,t,e){return e=e||"L",r(function(r){var d,f,i=String(r),u=i.length,A=t-u;return A>0&&("LR"===e?(f=~~(A/2),d=A-f,i=new Array(d+1).join(n)+i+new Array(f+1).join(n)):"R"===e?i+=new Array(A+1).join(n):"L"===e&&(i=new Array(A+1).join(n)+i)),i})}),e[t]("FORMAT")||(e.FORMAT=function(t){return"string"==typeof t?(t=new n.Tpl(t,n.Type.tpl_$0),r(function(n){return t.render({$0:n})})):r(t instanceof n.Tpl?function(n){return t.render(n)}:"function"==typeof t?function(n){return t(n)}:function(n){return String(n)})}),d[t]("DATETIME")||(d.DATETIME=function(n,t){if("function"==typeof DateX){var e=DateX.getParser(n,t||DateX.defaultLocale);return f(function(n){return!!n&&!1!==e(n)})}return f(function(n){return!0})}),d[t]("EMAIL")||(d.EMAIL=function(n){return f(function(t){return n.test(String(t))})}(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)),d[t]("URL")||(d.URL=function(n){return f(function(t){return n.test(String(t))})}(new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"))),d[t]("MIN_ITEMS")||(d.MIN_ITEMS=function(n,t){return n=parseInt(n,10)||0,f("function"==typeof t?function(e){return e.length>=n&&e.filter(t).length>=n}:function(t){return t.length>=n})}),d[t]("MAX_ITEMS")||(d.MAX_ITEMS=function(n,t){return n=parseInt(n,10)||0,f("function"==typeof t?function(e){return e.filter(t).length<=n}:function(t){return t.length<=n})}),d[t]("MIN_FILES")||(d.MIN_FILES=function(n,t){return n=parseInt(n,10)||0,f("function"==typeof t?function(e){return e&&e.length>0?Array.prototype.filter.call(e,t).length>=n:0>=n}:function(t){return!!t&&t.length>=n})}),d[t]("MAX_FILES")||(d.MAX_FILES=function(n,t){return n=parseInt(n,10)||0,f("function"==typeof t?function(e){return e&&e.length>0?Array.prototype.filter.call(e,t).length<=n:n>=0}:function(t){return!t||t.length<=n})}),d[t]("FILESIZE")||(d.FILESIZE=function(n){return n=parseInt(n,10)||0,f(function(t){if(!t||!t.length)return!0;for(var e=0,r=t.length;r>e;e++)if(t[e].size>n)return!1;return!0})}),d[t]("FILETYPE")||(d.FILETYPE=function(n){return n instanceof RegExp||(n="string"==typeof n?n.replace(/\s/g,""):"image/*",n=new RegExp(".?("+n.replace(/[\-\[\]\/\{\}\(\)\+\?\.\\\^\$\|]/g,"\\$&").replace(/,/g,"|").replace("/*","/.*")+")$","i")),f(function(t){if(!t||!t.length)return!0;for(var e=0,r=t.length;r>e;e++)if(!t[e].type.match(n))return!1;return!0})}),d[t]("IPV4")||(d.IPV4=function(n){return f(function(t){return n.test(String(t))})}(/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i)),d[t]("IPV6")||(d.IPV6=function(n){return f(function(t){return n.test(String(t))})}(/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i)),d[t]("IP")||(d.IP=d.IPV4),d[t]("BIC")||(d.BIC=function(n){return f(function(t){return n.test(String(t))})}(/^([A-Z]{6}[A-Z2-9][A-NP-Z1-2])(X{3}|[A-WY-Z0-9][A-Z0-9]{2})?$/)),d[t]("IBAN")||(d.IBAN=function(n){return f(function(n){var t,e,r,d,f,i,u,A,o,a,c=String(n).replace(/ /g,"").toUpperCase(),l="",s=!0,g="",Z="";if(t=c.substring(0,2),"undefined"==typeof i[t])return!1;if(f=i[t],u=new RegExp("^[A-Z]{2}\\d{2}"+f+"$",""),!u.test(c))return!1;for(e=c.substring(4,c.length)+c.substring(0,4),A=0,o=e.length;o>A;A++)r=e.charAt(A),"0"!=r&&(s=!1),s||(l+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(r));for(a=0,o=l.length;o>a;a++)d=l.charAt(a),Z=""+g+d,g=Z%97;return 1===g})}({AL:"\\d{8}[\\dA-Z]{16}",AD:"\\d{8}[\\dA-Z]{12}",AT:"\\d{16}",AZ:"[\\dA-Z]{4}\\d{20}",BE:"\\d{12}",BH:"[A-Z]{4}[\\dA-Z]{14}",BA:"\\d{16}",BR:"\\d{23}[A-Z][\\dA-Z]",BG:"[A-Z]{4}\\d{6}[\\dA-Z]{8}",CR:"\\d{17}",HR:"\\d{17}",CY:"\\d{8}[\\dA-Z]{16}",CZ:"\\d{20}",DK:"\\d{14}",DO:"[A-Z]{4}\\d{20}",EE:"\\d{16}",FO:"\\d{14}",FI:"\\d{14}",FR:"\\d{10}[\\dA-Z]{11}\\d{2}",GE:"[\\dA-Z]{2}\\d{16}",DE:"\\d{18}",GI:"[A-Z]{4}[\\dA-Z]{15}",GR:"\\d{7}[\\dA-Z]{16}",GL:"\\d{14}",GT:"[\\dA-Z]{4}[\\dA-Z]{20}",HU:"\\d{24}",IS:"\\d{22}",IE:"[\\dA-Z]{4}\\d{14}",IL:"\\d{19}",IT:"[A-Z]\\d{10}[\\dA-Z]{12}",KZ:"\\d{3}[\\dA-Z]{13}",KW:"[A-Z]{4}[\\dA-Z]{22}",LV:"[A-Z]{4}[\\dA-Z]{13}",LB:"\\d{4}[\\dA-Z]{20}",LI:"\\d{5}[\\dA-Z]{12}",LT:"\\d{16}",LU:"\\d{3}[\\dA-Z]{13}",MK:"\\d{3}[\\dA-Z]{10}\\d{2}",MT:"[A-Z]{4}\\d{5}[\\dA-Z]{18}",MR:"\\d{23}",MU:"[A-Z]{4}\\d{19}[A-Z]{3}",MC:"\\d{10}[\\dA-Z]{11}\\d{2}",MD:"[\\dA-Z]{2}\\d{18}",ME:"\\d{18}",NL:"[A-Z]{4}\\d{10}",NO:"\\d{11}",PK:"[\\dA-Z]{4}\\d{16}",PS:"[\\dA-Z]{4}\\d{21}",PL:"\\d{24}",PT:"\\d{21}",RO:"[A-Z]{4}[\\dA-Z]{16}",SM:"[A-Z]\\d{10}[\\dA-Z]{12}",SA:"\\d{2}[\\dA-Z]{18}",RS:"\\d{18}",SK:"\\d{20}",SI:"\\d{15}",ES:"\\d{20}",SE:"\\d{20}",CH:"\\d{5}[\\dA-Z]{12}",TN:"\\d{20}",TR:"\\d{5}[\\dA-Z]{17}",AE:"\\d{3}\\d{16}",GB:"[A-Z]{4}\\d{14}",VG:"[\\dA-Z]{4}\\d{16}"})),d[t]("CURRENCY")||(d.CURRENCY=function(n,t,e){return n="["+n.replace(/,/g,"")+"]"+(e?"?":""),currency_pattern=new RegExp("^"+(t?"":n)+"([1-9]{1}[0-9]{0,2}(\\,[0-9]{3})*(\\.[0-9]{0,2})?|[1-9]{1}[0-9]{0,}(\\.[0-9]{0,2})?|0(\\.[0-9]{0,2})?|(\\.[0-9]{1,2})?)"+(t?n:"")+"$"),f(function(n){return currency_pattern.test(String(n))})}),d[t]("CREDITCARDNUMBER")||(d.CREDITCARDNUMBER=f(function(n){if(n=String(n),/[^0-9 \-]+/.test(n))return!1;var t,e,r=0,d=0,f=!1;if(n=n.replace(/\D/g,""),n.length<13||n.length>19)return!1;for(t=n.length-1;t>=0;t--)e=n.charAt(t),d=parseInt(e,10),f&&(d*=2)>9&&(d-=9),r+=d,f=!f;return 0===r%10})),d[t]("CREDITCARDTYPE")||(d.CREDITCARDTYPE=function(n){var t=0;return(n.mastercard||n.MASTERCARD)&&(t|=1),(n.visa||n.VISA)&&(t|=2),(n.amex||n.AMEX)&&(t|=4),(n.dinersclub||n.DINERSCLUB)&&(t|=8),(n.enroute||n.ENROUTE)&&(t|=16),(n.discover||n.DISCOVER)&&(t|=32),(n.jcb||n.JCB)&&(t|=64),(n.unknown||n.UNKNOWN)&&(t|=128),(n.all||n.ALL)&&(t=255),f(function(n){return n=String(n),/[^0-9\-]+/.test(n)?!1:(n=n.replace(/\D/g,""),1&t&&/^(5[12345])/.test(n)?16===n.length:2&t&&/^(4)/.test(n)?16===n.length:4&t&&/^(3[47])/.test(n)?15===n.length:8&t&&/^(3(0[012345]|[68]))/.test(n)?14===n.length:16&t&&/^(2(014|149))/.test(n)?15===n.length:32&t&&/^(6011)/.test(n)?16===n.length:64&t&&/^(3)/.test(n)?16===n.length:64&t&&/^(2131|1800)/.test(value)?15===n.length:!!(128&t))})}),1});